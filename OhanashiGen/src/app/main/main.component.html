<h1 class="text-center d-none d-sm-block my-3">アイマス会話メーカー</h1>
<h2 class="text-center d-xs-block d-sm-none my-3">アイマス会話メーカー</h2>
<div class="text-center my-3">※「おはなしジェネレーター」から名前を変更しました。</div>
<p class="text-center ml-3">Ver.
    <a href="https://github.com/YSRKEN/ohanashi">1.7.2</a>　作者：
    <a href="https://twitter.com/YSRKEN" class="mr-3">@YSRKEN</a>
    <span class="align-middle d-inline-block mt-1">
        <span id="anchor"></span>
    </span>
</p>
<div class="col-xs-12 col-sm-8 col-md-6 mx-auto my-3">
    <form class="border p-3">
        <div class="form-group">
            <label for="name">キャラ名</label>
            <input type="text" class="form-control" id="name" name="name" placeholder="キャラ名" [(ngModel)]="nowTalk.name">
        </div>
        <div class="form-group">
            <label for="url">URL</label>
            <div class="d-flex">
                <input type="text" class="form-control mr-3" id="url" name="url" placeholder="表示する画像のURL" [(ngModel)]="nowTalk.url">
                <button class="form-control btn-secondary px-0" style="width: 100px;" (click)="moveSelectView()">選択...</button>
            </div>
        </div>
        <div class="form-group">
            <label for="message">喋る内容</label>
            <textarea class="form-control text-justify" id="message" name="message" placeholder="喋る内容" [(ngModel)]="nowTalk.message"
                style="height: 100px;">
            </textarea>
        </div>
        <div class="form-group form-check">
            <input type="checkbox" class="form-check-input" id="derepoFlg" name="derepoFlg" [(ngModel)]="derepoFlg" (click)="checkDerepoFlg()">
            <label class="form-check-label" for="derepoFlg">デレぽモードにする</label>
        </div>
        <div class="form-group" [ngClass]="derepoFlg ? 'd-block' : 'd-none'">
            <label for="favs">ファボ数</label>
            <input type="text" class="form-control" id="favs" name="favs" placeholder="XXXX" [(ngModel)]="nowTalk.favs" maxlength='5'>
        </div>
        <div class="form-group" [ngClass]="derepoFlg ? 'd-block' : 'd-none'">
            <label for="date">タイムスタンプ</label>
            <input type="text" class="form-control" id="date" name="date" placeholder="MM-DD HH:MM" [(ngModel)]="nowTalk.date" maxlength='11'>
        </div>
        <div class="form-group">
            <label>プレビュー</label>
            <div class="border" [ngClass]="derepoFlg ? 'derepo-style' : 'normal-style'">
                <app-talk-box url={{nowTalk.url}} name={{nowTalk.name}} message={{nowTalk.message}} derepoFlg={{derepoFlg2}}
                favs={{nowTalk.favs}} date={{nowTalk.date}}></app-talk-box>
            </div>
        </div>
        <div class="d-flex">
            <button class="form-control btn-primary mr-3 px-0" (click)="addTalk()">追加</button>
            <button class="form-control btn-primary mr-3 px-0" (click)="editTalk()" [ngClass]="nowTalk.id == 0 ? 'd-none' : 'd-inline'">変更</button>
            <button class="form-control btn-primary mr-3 px-0" (click)="upTalk()" [ngClass]="nowTalk.id == 0 ? 'd-none' : 'd-inline'">↑↑</button>
            <button class="form-control btn-primary mr-3 px-0" (click)="downTalk()" [ngClass]="nowTalk.id == 0 ? 'd-none' : 'd-inline'">↓↓</button>
            <button class="form-control btn-primary px-0" (click)="deleteTalk()" [ngClass]="nowTalk.id == 0 ? 'd-none' : 'd-inline'">削除</button>
        </div>
    </form>
    <form class="border p-3 my-3">
        <div [ngClass]="derepoFlg ? 'derepo-width' : 'normal-width'">
                <app-preview id="capture" (changeForm)="changeForm($event)" derepoFlg={{derepoFlg2}} refreshFlg={{refreshFlg}}
                (refreshDraw)="refreshDraw()"></app-preview>
        </div>
        <div class="d-flex mt-3" id="anchor2">
            <button class="form-control btn-primary mr-3 px-0" (click)="savePreview()">保存</button>
            <button class="form-control btn-primary mr-3 px-0" (click)="writeCanvas()">画像化</button>
            <button class="form-control btn-primary mr-3 px-0" (click)="setPreset()">初期化</button>
            <button class="form-control btn-primary px-0" (click)="deleteAllTalk()">全削除</button>
        </div>
    </form>
</div>